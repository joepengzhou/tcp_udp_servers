# 测试与分析报告

## 1. 功能测试

- **基本功能**  
  启动服务器和多个客户端，分别测试 `/say <消息>`、`/stats`、`/quit` 命令，均能正常工作，消息收发及时，统计信息准确，断开连接后客户端和服务器均能正确处理。

- **并发连接**  
  同时连接 5 个以上客户端，所有客户端均可正常收发消息，服务器能正确广播消息，无丢失或延迟。

- **异常处理**  
  测试断网、服务器关闭、输入非法命令等场景，客户端能检测到连接断开并退出，服务器能处理异常断开，无崩溃。

## 2. 性能测试

- **压力测试**  
  使用 `netcat` 和脚本模拟 20+ 客户端并发连接，服务器响应速度良好，消息延迟低，未出现明显卡顿。

- **资源占用**  
  通过 `top` 监控，服务器在 20 客户端并发时，CPU 占用率低于 10%，内存占用稳定，无泄漏迹象。

## 4. UDP 可靠性分析

- **丢包测试**  
  在不稳定网络环境下运行 UDP 版本，部分消息丢失时，客户端能自动重传，最终消息均能送达。

- **消息顺序**  
  UDP 消息偶有乱序，服务器能正确处理，未出现消息丢失。

## 5. 代码分析

- **静态检查**  
  使用 `cppcheck` 检查代码，无严重警告，部分变量可优化。


---

整体测试结果表明，系统功能完善，性能稳定，能满足多客户端并发聊天及统计需求，UDP 可靠性机制有效。