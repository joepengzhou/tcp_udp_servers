# 测试与分析报告

## 1. 功能测试

- **基本功能**  
  - 启动服务器和多个客户端，分别测试 `/say <消息>`、`/stats`、`/quit` 命令，均能正常工作，消息收发及时，统计信息准确
  - 断开连接后客户端和服务器均能正确处理。
  - 同时连接 3 个以上客户端，所有客户端均可正常收发消息，服务器能正确广播消息，无丢失或延迟。
  ![TCP](/01_tcp_usage.png)
  ![UDP](/02_udp_usage.png)

  - **UDP 可靠性分析 丢包测试**  
  在不稳定网络环境下运行 UDP 版本，部分消息丢失时，客户端能自动重传，最终消息均能送达。
  ![UDP resend](/05_udp_wireshark_resend.png)

## 2. 性能测试

  - 压力测试  
  使用 `netcat` 和脚本模拟10个并发虚拟客户端，服务器响应速度良好，消息延迟低，未出现明显卡顿。
  发往 127.0.0.1:5001
  每个客户端发送 200 条消息
  每条消息间隔 1 秒

  - 脚本见[06_test_multi_nc_send.sh]
  调用
  ```
  bash ./06_test_multi_nc_send.sh 127.0.0.1 5000 200 1
  bash ./06_test_multi_nc_send.sh 127.0.0.1 5001 200 1
  ```
  - 测试结果
  ![UDP resend](/06_03_test_tcp_result.png)
  ![UDP resend](/06_04_test_udp_result.png)

---

整体测试结果表明，系统功能完善，性能稳定，能满足多客户端并发聊天及统计需求，UDP 可靠性机制有效。